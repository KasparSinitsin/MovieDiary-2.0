const e="f227f8570d7e9f8fe4165d6e947bd24a",t="https://api.themoviedb.org/3",a=document.querySelector("#movies-container"),r=document.querySelector("#search-bar"),o=document.querySelector("#search-btn");let n={};const s=async()=>{try{let a=await fetch(`${t}/genre/movie/list?api_key=${e}&language=en-US`);if(!a.ok)throw Error(`HTTP Error: ${a.status}`);n=(await a.json()).genres.reduce((e,t)=>(e[t.id]=t.name,e),{})}catch(e){console.error("Error fetching genres:",e),h("Failed to fetch genres. Please try again.","error")}};document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{let e=document.getElementById("page-loader");e&&(e.style.display="none")},2e3)});const i=async(a="")=>{try{let r=a?`${t}/search/movie?api_key=${e}&query=${a}&language=en-US`:`${t}/movie/popular?api_key=${e}&language=en-US`,o=await fetch(r);if(!o.ok)throw Error(`HTTP Error: ${o.status}`);return(await o.json()).results}catch(e){return console.error("Error fetching movies:",e),h("Failed to fetch movies. Please try again.","error"),[]}},l=e=>{if(a.innerHTML="",0===e.length){a.innerHTML='<p class="text-center text-gray-400">No movies found.</p>';return}let t=JSON.parse(localStorage.getItem("journal"))||[];e.forEach(e=>{let r=document.createElement("div");r.className="bg-gray-900 p-4 rounded-md shadow-md hover:shadow-lg";let o=document.createElement("img");o.src=e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://via.placeholder.com/500x750?text=No+Image",o.alt=e.title,o.className="w-full h-72 object-cover rounded-md mb-4";let s=document.createElement("h2");s.textContent=e.title,s.className="text-xl font-bold mb-2";let i=e.genre_ids.map(e=>n[e]).filter(Boolean).join(", "),l=document.createElement("p");l.textContent=`Genres: ${i||"N/A"}`,l.className="text-gray-400 text-sm";let d=document.createElement("p");d.textContent=`Release Date: ${e.release_date}`,d.className="text-gray-400 text-sm";let m=document.createElement("button"),h=t.some(t=>t.id===e.id);m.innerHTML=h?'<i class="fas fa-heart"></i>':'<i class="far fa-heart"></i>',m.className="bg-transparent text-[#f99339] hover:text-white text-2xl mt-4 float-right",m.addEventListener("click",()=>{c(e,m)}),r.appendChild(o),r.appendChild(s),r.appendChild(l),r.appendChild(d),r.appendChild(m),a.appendChild(r)})},c=(e,t)=>{let a=JSON.parse(localStorage.getItem("journal"))||[];if(a.find(t=>t.id===e.id)){let r=a.filter(t=>t.id!==e.id);localStorage.setItem("journal",JSON.stringify(r)),t.innerHTML='<i class="far fa-heart"></i>',h(`${e.title} has been removed from your favorites.`,"info")}else e.tags=[],e.watchedDate=null,a.push(e),localStorage.setItem("journal",JSON.stringify(a)),t.innerHTML='<i class="fas fa-heart"></i>',h(`${e.title} has been added to your favorites!`,"success")},d=async()=>{await s(),l(await i())},m=async()=>{let e=r.value.trim();e&&l(await i(e))},h=(e,t)=>{Toastify({text:e,duration:3e3,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"success"===t?"#28a745":"error"===t?"#dc3545":"info"===t?"#17a2b8":"#ffc107",color:"white",borderRadius:"8px",padding:"8px 16px"}}).showToast()};o.addEventListener("click",m),d();
//# sourceMappingURL=index.6db68217.js.map
