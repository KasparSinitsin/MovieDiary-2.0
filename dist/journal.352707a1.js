let e={};const t=async()=>{try{let t=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=f227f8570d7e9f8fe4165d6e947bd24a&language=en-US");if(!t.ok)throw Error(`HTTP Error: ${t.status}`);e=(await t.json()).genres.reduce((e,t)=>(e[t.id]=t.name,e),{})}catch(e){console.error("Error fetching genres:",e),showToast("Failed to fetch genres. Please try again.","error")}},a=document.querySelector("#journal-movies-container"),n=document.querySelector("#tag-search-bar"),r=document.querySelector("#tag-search-btn"),l=()=>JSON.parse(localStorage.getItem("journal"))||[],d=e=>{localStorage.setItem("journal",JSON.stringify(e))},o=t=>{if(a.innerHTML="",0===t.length){a.innerHTML='<p class="text-center text-gray-400">No movies in your journal.</p>';return}t.forEach(t=>{let n=document.createElement("div");n.className="bg-gray-900 p-4 rounded-md shadow-md hover:shadow-lg";let r=document.createElement("img");r.src=`https://image.tmdb.org/t/p/w500${t.poster_path}`,r.alt=t.title,r.className="w-full h-72 object-cover rounded-md mb-4";let s=document.createElement("h2");s.textContent=t.title,s.className="text-xl font-bold mb-2";let c=t.genre_ids.map(t=>e[t]).filter(Boolean).join(", "),m=document.createElement("p");m.textContent=`Genres: ${c||"N/A"}`,m.className="text-gray-400 text-sm";let i=document.createElement("p");i.textContent=`Release Date: ${t.release_date}`,i.className="text-gray-400 text-sm";let p=document.createElement("p");p.textContent=`Tags: ${t.tags.join(", ")||"None"}`,p.className="text-gray-400 text-sm";let h=document.createElement("p");h.textContent=`Watched: ${t.watchedDate||"Not set"}`,h.className="text-gray-400 text-sm";let u=document.createElement("input");u.type="text",u.placeholder="Add tags (comma separated)",u.className="w-full p-2 rounded-md bg-gray-800 text-white mb-2";let g=document.createElement("input");g.type="date",g.className="w-full p-2 rounded-md bg-gray-800 text-white mb-2";let x=document.createElement("button");x.textContent="Update",x.className="hover:bg-[#f99339] bg-transparent border-2 border-[#f99339] text-white px-4 py-2 rounded-md mb-2",x.addEventListener("click",()=>{let e=u.value.split(",").map(e=>e.trim()).filter(e=>e),a=g.value,n=l().map(n=>n.id===t.id?{...n,tags:e.length?e:n.tags,watchedDate:a||n.watchedDate}:n);d(n),o(n)});let f=document.createElement("button");f.innerHTML='<i class="fas fa-trash"></i>',f.className="bg-transparent text-[#f99339] hover:text-white text-2xl mt-2 float-right rounded-md",f.addEventListener("click",()=>{let e=l().filter(e=>e.id!==t.id);d(e),o(e)}),n.appendChild(r),n.appendChild(s),n.appendChild(m),n.appendChild(i),n.appendChild(p),n.appendChild(h),n.appendChild(u),n.appendChild(g),n.appendChild(x),n.appendChild(f),a.appendChild(n)})},s=async()=>{await t(),o(l())};r.addEventListener("click",()=>{let e=n.value.trim().toLowerCase();if(!e){o(l());return}o(l().filter(t=>t.tags.some(t=>t.toLowerCase().includes(e))))}),s();
//# sourceMappingURL=journal.352707a1.js.map
